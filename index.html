<!DOCTYPE html>
<html>
<head>
    <title>10K Clash Royale Celebration</title>
    <style>
        body { margin: 0; overflow: hidden; background: #222; }
        canvas { display: block; }

        /* GIF at bottom center */
        #bottomGif {
            position: fixed;
            bottom: 20px; 
            left: 50%; 
            transform: translateX(-50%);
            width: 250px;  /* adjust size */
            z-index: 10;
            pointer-events: none; /* allows clicking through */
        }
    </style>
</head>
<body>

<!-- Bottom GIF -->
<img src="https://media.tenor.com/j_MxsHf3fXIAAAAM/clash-royale-clash-mini.gif" id="bottomGif">

<script type="importmap">
{
  "imports": {
    "three": "https://unpkg.com/three@0.160.0/build/three.module.js",
    "three/addons/": "https://unpkg.com/three@0.160.0/examples/jsm/"
  }
}
</script>

<script type="module">
import * as THREE from 'three';
import { OrbitControls } from 'three/addons/controls/OrbitControls.js';
import { FontLoader } from 'three/addons/loaders/FontLoader.js';
import { TextGeometry } from 'three/addons/geometries/TextGeometry.js';

/* Scene */
const scene = new THREE.Scene();

/* Background image 
const loader = new THREE.TextureLoader();
loader.load('https://support.supercell.com/images/_sidebarPortrait/CR-hamburger-for-portrait.jpg?v=1762334933', function(texture){
    scene.background = texture;*/ 
scene.background = new THREE.Color(0x222222);


    
});

/* Camera */
const camera = new THREE.PerspectiveCamera(
    window.innerWidth < 600 ? 85 : 75, 
    window.innerWidth / window.innerHeight,
    0.1, 
    1000
);
camera.position.set(0, 5, 10);
camera.lookAt(0, 4, 0);

/* Renderer */
const renderer = new THREE.WebGLRenderer({ antialias: true });
renderer.setPixelRatio(window.devicePixelRatio);
renderer.setSize(window.innerWidth, window.innerHeight);
document.body.appendChild(renderer.domElement);

/* OrbitControls */
const controls = new OrbitControls(camera, renderer.domElement);
controls.enableDamping = true;
controls.minDistance = 6;
controls.maxDistance = 20;
controls.maxPolarAngle = Math.PI / 1.8;

/* Materials */
const stoneTexture = loader.load("https://threejs.org/examples/textures/brick_diffuse.jpg");
stoneTexture.wrapS = THREE.RepeatWrapping;
stoneTexture.wrapT = THREE.RepeatWrapping;
stoneTexture.repeat.set(4, 3);

const stoneMaterial = new THREE.MeshStandardMaterial({ map: stoneTexture, color: 0x999999 });
const goldMaterial = new THREE.MeshStandardMaterial({ color: 0xFFD700, metalness: 1, roughness: 0.2, emissive: 0x553300, emissiveIntensity: 0.7 });

/* Cake Tower */
const towerHeight = 4;
const towerGeometry = new THREE.CylinderGeometry(3.5, 3.5, towerHeight, 25);
const towerMesh = new THREE.Mesh(towerGeometry, stoneMaterial);
towerMesh.position.y = towerHeight / 2;
scene.add(towerMesh);

/* Floating Text */
const fontLoader = new FontLoader();
fontLoader.load("https://threejs.org/examples/fonts/helvetiker_regular.typeface.json", (font) => {
    const textGeo = new TextGeometry("CONGRATS ON 10,000!!!", {
        font: font,
        size: 0.8,
        height: 0.15,
        curveSegments: 12,
    });
    textGeo.center();

    const textMesh = new THREE.Mesh(textGeo, goldMaterial);
    textMesh.position.set(0, 9.5, 0); // floating above cake
    scene.add(textMesh);
});

/* Sparkles */
const sparkGroup = new THREE.Group();
scene.add(sparkGroup);
function createSpark() {
    const geo = new THREE.SphereGeometry(0.05);
    const mat = new THREE.MeshBasicMaterial({ color: 0xFFAA33 });
    const spark = new THREE.Mesh(geo, mat);
    const angle = Math.random() * Math.PI * 2;
    const radius = 4.2;
    spark.position.set(Math.cos(angle)*radius, 8.3, Math.sin(angle)*radius);
    spark.userData.velY = Math.random() * 0.02 + 0.02;
    sparkGroup.add(spark);
}
for (let i = 0; i < 40; i++) createSpark();

/* Confetti sticks in semicircle */
const confettiGroup = new THREE.Group();
scene.add(confettiGroup);
function createConfettiPiece() {
    const geo = new THREE.CylinderGeometry(0.02, 0.02, 0.5); // thin stick
    const mat = new THREE.MeshStandardMaterial({ color: new THREE.Color(Math.random(), Math.random(), Math.random()) });
    const confetti = new THREE.Mesh(geo, mat);

    // semicircle around cake top
    const angle = (Math.random() - 0.5) * Math.PI; // -90° to 90°
    const radius = 2.5;
    confetti.position.set(Math.cos(angle)*radius, towerHeight + 0.25, Math.sin(angle)*radius);
    confetti.rotationSpeed = Math.random() * 0.02;
    confettiGroup.add(confetti);
}
for (let i = 0; i < 20; i++) createConfettiPiece();

/* Lights */
scene.add(new THREE.AmbientLight(0xffffff, 0.8));
const sun = new THREE.DirectionalLight(0xffffff, 2);
sun.position.set(5, 15, 7);
scene.add(sun);

/* Animate */
function animate() {
    requestAnimationFrame(animate);

    // Sparkles
    sparkGroup.children.forEach(s => {
        s.position.y += s.userData.velY;
        if(s.position.y > 9) s.position.y = 8.1;
    });

    // Confetti rotation
    confettiGroup.children.forEach(c => {
        c.rotation.x += c.rotationSpeed;
        c.rotation.y += c.rotationSpeed;
    });

    controls.update();
    renderer.render(scene, camera);
}
animate();

/* Resize */
window.addEventListener("resize", () => {
    camera.aspect = window.innerWidth / window.innerHeight;
    camera.fov = window.innerWidth < 600 ? 85 : 75;
    camera.updateProjectionMatrix();
    renderer.setSize(window.innerWidth, window.innerHeight);
});
</script>

</body>
</html>
