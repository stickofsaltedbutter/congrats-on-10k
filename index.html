<!DOCTYPE html>
<html>
<head>
    <title>10K Clash Royale update 10000</title>
    <style>
        body { margin: 0; overflow: hidden; background: #222; }
        canvas { display: block; }
        #bottomGif {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            width: 250px;
            z-index: 10;
            pointer-events: none;
        }
    </style>
</head>
<body>

<img id="bottomGif" src="https://media.tenor.com/j_MxsHf3fXIAAAAM/clash-royale-clash-mini.gif">

<script type="importmap">
{
  "imports": {
    "three": "https://unpkg.com/three@0.160.0/build/three.module.js",
    "three/addons/": "https://unpkg.com/three@0.160.0/examples/jsm/"
  }
}
</script>

<script type="module">
import * as THREE from 'three';
import { OrbitControls } from 'three/addons/controls/OrbitControls.js';
import { FontLoader } from 'three/addons/loaders/FontLoader.js';
import { TextGeometry } from 'three/addons/geometries/TextGeometry.js';

/* Scene */
const scene = new THREE.Scene();

/* Background */
const loader = new THREE.TextureLoader();
loader.load(
    "https://support.supercell.com/images/_sidebarPortrait/CR-hamburger-for-portrait.jpg?v=1762334933",
    tex => scene.background = tex
);

/* Camera */
const camera = new THREE.PerspectiveCamera(
    window.innerWidth < 600 ? 85 : 75,
    window.innerWidth / window.innerHeight,
    0.1,
    1000
);
camera.position.set(0, 8, 15);
camera.lookAt(0, 4, 0);

/* Renderer */
const renderer = new THREE.WebGLRenderer({ antialias: true });
renderer.setPixelRatio(window.devicePixelRatio);
renderer.setSize(window.innerWidth, window.innerHeight);
document.body.appendChild(renderer.domElement);

/* Controls */
const controls = new OrbitControls(camera, renderer.domElement);
controls.enableDamping = true;

/* Materials */
const blueMaterial = new THREE.MeshStandardMaterial({ color: 0x228BEE, roughness: 0.4, metalness: 0.3 });
const goldMaterial = new THREE.MeshStandardMaterial({ color: 0xFFD700, metalness: 1, roughness: 0.3 });

const cakeHeight = 3;
const cakeRadius = 3;

/* CAKE */
const cakeMesh = new THREE.Mesh(
    new THREE.CylinderGeometry(cakeRadius, cakeRadius, cakeHeight, 64),
    blueMaterial
);
cakeMesh.position.y = cakeHeight / 2;
scene.add(cakeMesh);

/* TOP BORDER */

const topRosettes = new THREE.Group();
scene.add(topRosettes);

const topCount = 22;

for (let i = 0; i < topCount; i++) {
    const angle = (i / topCount) * Math.PI * 2;
    const x = Math.cos(angle) * cakeRadius * 0.92;
    const z = Math.sin(angle) * cakeRadius * 0.92;

    const rosetteGeo = createRosette(0.35, 0.18, 3.2);
    const rosette = new THREE.Mesh(rosetteGeo, goldMaterial);

    rosette.position.set(x, cakeHeight + 0.08, z);
    rosette.lookAt(0, cakeHeight + 0.08, 0);

    topRosettes.add(rosette);
}

/* BOTTOM BORDER */
const bottomBorder = new THREE.Group();
scene.add(bottomBorder);

const bottomCount = 32;
const bottomRadius = cakeRadius * 0.95;

for (let i = 0; i < bottomCount; i++) {
    const angle = (i / bottomCount) * Math.PI * 2;
    const x = Math.cos(angle) * bottomRadius;
    const z = Math.sin(angle) * bottomRadius;

    const geo = new THREE.TorusKnotGeometry(0.22, 0.08, 64, 12, 2, 3);
    const dollop = new THREE.Mesh(geo, goldMaterial);

    dollop.scale.set(1, 0.65, 1);
    dollop.position.set(x, 0.15, z);

    bottomBorder.add(dollop);
}

/* FLOATING TEXT */
const fontLoader = new FontLoader();
fontLoader.load(
    "https://threejs.org/examples/fonts/helvetiker_regular.typeface.json",
    font => {
        const textGeo = new TextGeometry("CONGRATS ON 10,000!!!", {
            font: font,
            size: 0.8,
            height: 0.2
        });
        textGeo.center();
        const textMesh = new THREE.Mesh(textGeo, goldMaterial);
        textMesh.position.y = cakeHeight + 2.5;
        scene.add(textMesh);
    }
);

/* CONFETTI */
const confettiGroup = new THREE.Group();
scene.add(confettiGroup);

const confTexture = loader.load("https://event.supercell.com/clashroyale/images/landing/crown.png");

function createConfetti() {
    const geo = new THREE.PlaneGeometry(0.5, 0.5);
    const mat = new THREE.MeshBasicMaterial({ map: confTexture, transparent: true });

    const c = new THREE.Mesh(geo, mat);
    c.position.set((Math.random() - 0.5) * 10, Math.random() * 5 + 5, (Math.random() - 0.5) * 10);
    c.fallSpeed = Math.random() * 0.05 + 0.02;
    c.rotationSpeed = Math.random() * 0.05;
    confettiGroup.add(c);
}

for (let i = 0; i < 100; i++) createConfetti();

/* TOPPERS */
const topperGroup = new THREE.Group();
scene.add(topperGroup);

const topperAngles = [-Math.PI / 2.5, 0, Math.PI / 2.5];
const placeholderColors = [0xff5555, 0x55ff55, 0x5555ff];

for (let i = 0; i < 3; i++) {

    const plane = new THREE.Mesh(
        new THREE.PlaneGeometry(2, 2),
        new THREE.MeshBasicMaterial({ color: placeholderColors[i], side: THREE.DoubleSide })
    );
    plane.position.y = 2;

    const stick = new THREE.Mesh(
        new THREE.CylinderGeometry(0.05, 0.05, 2),
        new THREE.MeshStandardMaterial({ color: 0x804000 })
    );
    stick.position.y = 1;

    const g = new THREE.Group();
    g.add(stick);
    g.add(plane);

    const angle = topperAngles[i];
    g.position.set(Math.cos(angle) * cakeRadius * 0.8, cakeHeight + 0.1, Math.sin(angle) * cakeRadius * 0.8);

    topperGroup.add(g);
}

/* LIGHTS */
scene.add(new THREE.AmbientLight(0xffffff, 0.8));
const dl = new THREE.DirectionalLight(0xffffff, 1.5);
dl.position.set(5, 15, 10);
scene.add(dl);

/* ANIMATE */
function animate() {
    requestAnimationFrame(animate);

    confettiGroup.children.forEach(c => {
        c.position.y -= c.fallSpeed;
        c.rotation.x += c.rotationSpeed;
        c.rotation.y += c.rotationSpeed;
        if (c.position.y < -1) {
            c.position.y = Math.random() * 5 + 5;
        }
    });

    controls.update();
    renderer.render(scene, camera);
}
animate();

/* RESIZE */
window.addEventListener("resize", () => {
    camera.aspect = window.innerWidth / window.innerHeight;
    camera.updateProjectionMatrix();
    renderer.setSize(window.innerWidth, window.innerHeight);
});
</script>

</body>
</html>
